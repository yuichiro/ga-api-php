<?php        require_once(dirname(__FILE__) . '/google-api-php-client/src/Google/autoload.php');        define('APPLICATION_NAME', 'gaapi');    define('SERVICE_ACCOUNT_NAME', 'xxxxxxxx@developer.gserviceaccount.com');    define('KEY_PATH', dirname(__FILE__) . '/p12/xxxx.p12');    date_default_timezone_set('Asia/Tokyo');        class Analytics {                private $service;                function __construct($applicationName, $serviceAccountName, $keyPath) {            $creds = new Google_Auth_AssertionCredentials(                                                          $serviceAccountName,                                                          array('https://www.googleapis.com/auth/analytics'),                                                          file_get_contents($keyPath)                                                          );                        $client = new Google_Client();            $client->setApplicationName($applicationName);            $client->setAssertionCredentials($creds);            $this->service = new Google_Service_Analytics($client);        }                function getReport($viewId, $startDate, $endDate) {            $result = $this->service->data_ga->get(                                                   'ga:' . $viewId,                                                   $startDate,                                                   $endDate,                                                   'ga:pageviews,ga:users'                                                   );                        return $result['rows'];        }    }        $analytics = new Analytics(APPLICATION_NAME, SERVICE_ACCOUNT_NAME, KEY_PATH);    $viewId = 'xxxxxxxx';    $yesterday = date('Y-m-d', strtotime('-1 day'));    var_dump($analytics->getReport($viewId, $yesterday, $yesterday));